# ğŸ¤– GitHub Actions è‡ªåŠ¨åŒ–éƒ¨ç½²æŒ‡å—

## ğŸ“‹ è‡ªåŠ¨åŒ–æµç¨‹è¯´æ˜

### ğŸ¯ æ™ºèƒ½éƒ¨ç½²æ¨¡å¼

ä½ çš„ GitHub Actions ç°åœ¨æ”¯æŒ**ä¸¤ç§éƒ¨ç½²æ¨¡å¼**ï¼Œè‡ªåŠ¨è¯†åˆ«ï¼š

| éƒ¨ç½²æ¨¡å¼ | è§¦å‘æ¡ä»¶ | æ‰§è¡Œæ“ä½œ | æ—¶é—´ |
|---------|---------|---------|------|
| **é¦–æ¬¡éƒ¨ç½²** | Ollama æ¨¡å‹ä¸å­˜åœ¨ | å®Œæ•´åˆå§‹åŒ–ï¼ˆä¸‹è½½æ¨¡å‹ï¼‰ | ~5-10åˆ†é’Ÿ |
| **æ—¥å¸¸æ›´æ–°** | Ollama æ¨¡å‹å·²å­˜åœ¨ | ä»…é‡å¯åç«¯ | ~2-3åˆ†é’Ÿ |

---

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³• 1ï¼šæœ¬åœ°æ¨é€è§¦å‘ï¼ˆæ¨èï¼‰

```bash
# 1. æœ¬åœ°ä¿®æ”¹ä»£ç åæäº¤
git add .
git commit -m "your commit message"
git push origin main

# 2. GitHub Actions è‡ªåŠ¨è§¦å‘
# 3. è‡ªåŠ¨éƒ¨ç½²åˆ°æœåŠ¡å™¨
# 4. å®Œæˆï¼
```

### æ–¹æ³• 2ï¼šGitHub ç½‘é¡µè§¦å‘

1. åœ¨ GitHub ä»“åº“é¡µé¢ç¼–è¾‘æ–‡ä»¶
2. Commit changes
3. è‡ªåŠ¨è§¦å‘éƒ¨ç½²

---

## ğŸ” éƒ¨ç½²æµç¨‹è¯¦è§£

### é¦–æ¬¡éƒ¨ç½²ï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰

å½“æ£€æµ‹åˆ° **Ollama æ¨¡å‹ä¸å­˜åœ¨** æ—¶ï¼Œæ‰§è¡Œï¼š

```
1. ğŸ“¥ æ‹‰å–æœ€æ–°ä»£ç 
2. ğŸ”„ åœæ­¢æ—§æœåŠ¡
3. ğŸ—ï¸ æ„å»ºæ‰€æœ‰é•œåƒ
4. ğŸš€ å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆMySQL + ES + Ollama + Backend + Frontendï¼‰
5. â³ ç­‰å¾… 60 ç§’
6. ğŸ“¥ ä¸‹è½½ Ollama æ¨¡å‹ï¼ˆ270MBï¼Œçº¦ 2-5 åˆ†é’Ÿï¼‰
7. ğŸ”„ é‡å¯åç«¯
8. âœ… éªŒè¯éƒ¨ç½²
```

**é¢„è®¡æ—¶é—´**ï¼š5-10 åˆ†é’Ÿ

### æ—¥å¸¸æ›´æ–°ï¼ˆè‡ªåŠ¨æ£€æµ‹ï¼‰

å½“æ£€æµ‹åˆ° **Ollama æ¨¡å‹å·²å­˜åœ¨** æ—¶ï¼Œæ‰§è¡Œï¼š

```
1. ğŸ“¥ æ‹‰å–æœ€æ–°ä»£ç 
2. ğŸ”„ ç¡®ä¿æ‰€æœ‰æœåŠ¡è¿è¡Œ
3. ğŸ—ï¸ ä»…é‡æ–°æ„å»ºåç«¯é•œåƒ
4. ğŸ”„ ä»…é‡å¯åç«¯å®¹å™¨
5. â³ ç­‰å¾… 20 ç§’
6. âœ… éªŒè¯éƒ¨ç½²
```

**é¢„è®¡æ—¶é—´**ï¼š2-3 åˆ†é’Ÿ

**ä¼˜åŠ¿**ï¼š
- âœ… MySQL/ES/Ollama ä¸å—å½±å“
- âœ… æ•°æ®ä¸ä¸¢å¤±
- âœ… Ollama æ¨¡å‹æ— éœ€é‡å¤ä¸‹è½½
- âœ… éƒ¨ç½²é€Ÿåº¦å¿«

---

## ğŸ“Š è‡ªåŠ¨åŒ–æ£€æŸ¥é¡¹

éƒ¨ç½²å®Œæˆåï¼ŒGitHub Actions ä¼šè‡ªåŠ¨éªŒè¯ï¼š

- âœ… æ‰€æœ‰ Docker æœåŠ¡çŠ¶æ€
- âœ… Ollama æ¨¡å‹æ˜¯å¦å­˜åœ¨
- âœ… åç«¯ API å¥åº·æ£€æŸ¥
- âœ… å‰ç«¯é¡µé¢å¯è®¿é—®

---

## ğŸ”§ GitHub Secrets é…ç½®

ç¡®ä¿åœ¨ GitHub ä»“åº“è®¾ç½®ä¸­é…ç½®äº†ä»¥ä¸‹ Secretsï¼š

### å¿…é¡»é…ç½®

| Secret åç§° | è¯´æ˜ | ç¤ºä¾‹ |
|------------|------|------|
| `SERVER_HOST` | æœåŠ¡å™¨ IP åœ°å€ | `123.45.67.89` |
| `SERVER_SSH_KEY` | SSH ç§é’¥ | `-----BEGIN RSA PRIVATE KEY-----...` |

### é…ç½®æ­¥éª¤

1. æ‰“å¼€ GitHub ä»“åº“
2. è¿›å…¥ `Settings` â†’ `Secrets and variables` â†’ `Actions`
3. ç‚¹å‡» `New repository secret`
4. åˆ†åˆ«æ·»åŠ ä¸Šè¿°ä¸¤ä¸ª Secret

---

## ğŸ“ éƒ¨ç½²æ—¥å¿—æŸ¥çœ‹

### åœ¨ GitHub æŸ¥çœ‹

1. è¿›å…¥ä»“åº“çš„ `Actions` æ ‡ç­¾
2. é€‰æ‹©æœ€è¿‘çš„ workflow run
3. å±•å¼€ `ğŸš€ éƒ¨ç½²åˆ°æœåŠ¡å™¨` æ­¥éª¤
4. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

### åœ¨æœåŠ¡å™¨æŸ¥çœ‹

```bash
# SSH ç™»å½•æœåŠ¡å™¨
ssh root@your-server-ip

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
cd /root/app/LLMBlog
docker compose ps

# æŸ¥çœ‹åç«¯æ—¥å¿—
docker compose logs -f backend

# æŸ¥çœ‹ Ollama æ—¥å¿—
docker compose logs -f ollama
```

---

## ğŸ¯ éƒ¨ç½²ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šé¦–æ¬¡éƒ¨ç½²ï¼ˆå®Œæ•´æ—¥å¿—ï¼‰

```
========================================
  å¼€å§‹è‡ªåŠ¨éƒ¨ç½² - é“ƒé“›å¸ˆå…„å¤§æ¨¡å‹åšå®¢
========================================

ğŸ“¥ æ‹‰å–æœ€æ–°ä»£ç ...
Already up to date.

ğŸ¯ æ£€æµ‹åˆ°é¦–æ¬¡éƒ¨ç½²ï¼Œæ‰§è¡Œå®Œæ•´åˆå§‹åŒ–...

ğŸ”„ åœæ­¢æ—§æœåŠ¡...
[+] Running 5/5
 âœ” Container lingdang-frontend  Removed
 âœ” Container lingdang-backend   Removed
 âœ” Container lingdang-ollama    Removed
 âœ” Container lingdang-elasticsearch Removed
 âœ” Container lingdang-mysql     Removed

ğŸ—ï¸ æ„å»ºé•œåƒ...
[+] Building 45.2s

ğŸš€ å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆåŒ…æ‹¬ Ollamaï¼‰...
[+] Running 5/5
 âœ” Container lingdang-mysql         Started
 âœ” Container lingdang-elasticsearch Started
 âœ” Container lingdang-ollama        Started
 âœ” Container lingdang-backend       Started
 âœ” Container lingdang-frontend      Started

â³ ç­‰å¾…æœåŠ¡å®Œå…¨å¯åŠ¨ï¼ˆ60ç§’ï¼‰...

ğŸ“¥ åˆå§‹åŒ– Ollama æ¨¡å‹ï¼ˆé¦–æ¬¡éœ€è¦ä¸‹è½½ 270MBï¼‰...
pulling manifest
pulling c71d239df917... 100% â–•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ– 274 MB
verifying sha256 digest
writing manifest
removing any unused layers
success

ğŸ”„ é‡å¯åç«¯åº”ç”¨æ–°é…ç½®...
[+] Container lingdang-backend Restarted

â³ ç­‰å¾…æœåŠ¡ç¨³å®š...

ğŸ“Š æ£€æŸ¥æœåŠ¡çŠ¶æ€...
NAME                      STATUS
lingdang-mysql            Up
lingdang-elasticsearch    Up
lingdang-ollama           Up
lingdang-backend          Up
lingdang-frontend         Up

ğŸ” éªŒè¯ Ollama æ¨¡å‹...
nomic-embed-text:latest  274MB
âœ… Ollama æ¨¡å‹æ­£å¸¸

ğŸ” éªŒè¯åç«¯ API...
{"status":"UP","service":"lingdang-blog-backend"}
âœ… åç«¯æ­£å¸¸

ğŸ” éªŒè¯å‰ç«¯...
âœ… å‰ç«¯æ­£å¸¸

========================================
âœ… éƒ¨ç½²å®Œæˆï¼
========================================

ğŸ“ éƒ¨ç½²æ¨¡å¼: é¦–æ¬¡éƒ¨ç½²ï¼ˆå®Œæ•´åˆå§‹åŒ–ï¼‰
ğŸ”— è®¿é—®åœ°å€: http://localhost
ğŸ¨ Studio: http://localhost/studio/login
ğŸ¤– AI åŠ©æ‰‹: http://localhost/assistant
```

### ç¤ºä¾‹ 2ï¼šæ—¥å¸¸æ›´æ–°ï¼ˆä»…é‡å¯åç«¯ï¼‰

```
========================================
  å¼€å§‹è‡ªåŠ¨éƒ¨ç½² - é“ƒé“›å¸ˆå…„å¤§æ¨¡å‹åšå®¢
========================================

ğŸ“¥ æ‹‰å–æœ€æ–°ä»£ç ...
Updating abc1234..def5678
Fast-forward
 backend/src/main/java/...  | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

âœ… æ£€æµ‹åˆ° Ollama æ¨¡å‹å·²å­˜åœ¨ï¼Œè·³è¿‡åˆå§‹åŒ–

ğŸ”„ æ—¥å¸¸æ›´æ–°æ¨¡å¼ï¼šä»…é‡å¯åç«¯...
[+] Running 1/1
 âœ” Container lingdang-backend Restarted

âœ… åç«¯å·²æ›´æ–°é‡å¯

â³ ç­‰å¾…æœåŠ¡ç¨³å®š...

ğŸ“Š æ£€æŸ¥æœåŠ¡çŠ¶æ€...
NAME                      STATUS
lingdang-mysql            Up
lingdang-elasticsearch    Up
lingdang-ollama           Up
lingdang-backend          Up (restarted 15s ago)
lingdang-frontend         Up

ğŸ” éªŒè¯ Ollama æ¨¡å‹...
nomic-embed-text:latest  274MB
âœ… Ollama æ¨¡å‹æ­£å¸¸

ğŸ” éªŒè¯åç«¯ API...
âœ… åç«¯æ­£å¸¸

ğŸ” éªŒè¯å‰ç«¯...
âœ… å‰ç«¯æ­£å¸¸

========================================
âœ… éƒ¨ç½²å®Œæˆï¼
========================================

ğŸ“ éƒ¨ç½²æ¨¡å¼: æ—¥å¸¸æ›´æ–°ï¼ˆä»…é‡å¯åç«¯ï¼‰
ğŸ”— è®¿é—®åœ°å€: http://localhost
ğŸ¨ Studio: http://localhost/studio/login
ğŸ¤– AI åŠ©æ‰‹: http://localhost/assistant
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### é¦–æ¬¡éƒ¨ç½²æ³¨æ„

1. **ä¸‹è½½æ—¶é—´**ï¼šOllama æ¨¡å‹ä¸‹è½½éœ€è¦ 2-5 åˆ†é’Ÿï¼ˆå–å†³äºæœåŠ¡å™¨ç½‘é€Ÿï¼‰
2. **ç½‘ç»œè¦æ±‚**ï¼šç¡®ä¿æœåŠ¡å™¨å¯ä»¥è®¿é—® Ollama æ¨¡å‹ä¸‹è½½åœ°å€
3. **è¶…æ—¶è®¾ç½®**ï¼šGitHub Actions é»˜è®¤è¶…æ—¶ 60 åˆ†é’Ÿï¼Œè¶³å¤Ÿä½¿ç”¨

### æ—¥å¸¸æ›´æ–°æ³¨æ„

1. **ä»£ç å˜æ›´**ï¼šä»…ä»£ç å˜æ›´æ—¶ï¼Œåªé‡å¯åç«¯
2. **ä¾èµ–å˜æ›´**ï¼šå¦‚æœ `pom.xml` å˜æ›´ï¼Œä¼šé‡æ–°æ„å»ºé•œåƒ
3. **é…ç½®å˜æ›´**ï¼š`.env` å˜æ›´éœ€è¦å®Œå…¨é‡å¯

### å¼ºåˆ¶å®Œæ•´é‡å»º

å¦‚æœéœ€è¦å¼ºåˆ¶å®Œå…¨é‡å»ºï¼ˆåŒ…æ‹¬é‡æ–°ä¸‹è½½ Ollama æ¨¡å‹ï¼‰ï¼š

```bash
# æ–¹æ³• 1ï¼šæ‰‹åŠ¨åˆ é™¤ Ollama å®¹å™¨
ssh root@your-server
cd /root/app/LLMBlog
docker compose down ollama
docker volume rm llmblog_ollama-data

# æ–¹æ³• 2ï¼šåˆ é™¤æ‰€æœ‰æ•°æ®ï¼ˆæ…ç”¨ï¼‰
docker compose down -v

# ç„¶åæ¨é€ä»»æ„ä»£ç è§¦å‘éƒ¨ç½²
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šGitHub Actions éƒ¨ç½²å¤±è´¥

**æŸ¥çœ‹**ï¼š
1. GitHub ä»“åº“ â†’ Actions â†’ å¤±è´¥çš„ workflow
2. å±•å¼€å¤±è´¥çš„æ­¥éª¤æŸ¥çœ‹é”™è¯¯ä¿¡æ¯

**å¸¸è§åŸå› **ï¼š
- SSH è¿æ¥å¤±è´¥ï¼ˆæ£€æŸ¥ `SERVER_SSH_KEY` å’Œ `SERVER_HOST`ï¼‰
- æœåŠ¡å™¨ç£ç›˜ç©ºé—´ä¸è¶³
- Docker æœåŠ¡æœªè¿è¡Œ

### é—®é¢˜ 2ï¼šOllama æ¨¡å‹ä¸‹è½½å¤±è´¥

**ç—‡çŠ¶**ï¼šé¦–æ¬¡éƒ¨ç½²æ—¶ Ollama åˆå§‹åŒ–å¤±è´¥

**è§£å†³**ï¼š
```bash
# SSH ç™»å½•æœåŠ¡å™¨æ‰‹åŠ¨ä¸‹è½½
ssh root@your-server
cd /root/app/LLMBlog
docker exec lingdang-ollama ollama pull nomic-embed-text
```

### é—®é¢˜ 3ï¼šåç«¯å¯åŠ¨å¤±è´¥

**æŸ¥çœ‹æ—¥å¿—**ï¼š
```bash
ssh root@your-server
cd /root/app/LLMBlog
docker compose logs backend
```

**å¸¸è§åŸå› **ï¼š
- MySQL/ES æœªå®Œå…¨å¯åŠ¨
- ç¯å¢ƒå˜é‡é…ç½®é”™è¯¯
- ç«¯å£è¢«å ç”¨

---

## ğŸ¯ ä¼˜åŒ–å»ºè®®

### åŠ é€Ÿæ„å»º

å¦‚æœæ„å»ºæ…¢ï¼Œå¯ä»¥ï¼š

1. **ä½¿ç”¨å›½å†…é•œåƒæº**ï¼ˆå·²åœ¨ Dockerfile ä¸­é…ç½®ï¼‰
2. **å¯ç”¨ BuildKit**ï¼š
   ```bash
   # åœ¨æœåŠ¡å™¨ä¸Š
   export DOCKER_BUILDKIT=1
   ```

### ç›‘æ§éƒ¨ç½²

è®¾ç½® GitHub Actions é€šçŸ¥ï¼š

1. GitHub ä»“åº“ â†’ Settings â†’ Notifications
2. å¯ç”¨ Actions é€šçŸ¥
3. é€‰æ‹©æ¥æ”¶æ–¹å¼ï¼ˆEmail/Appï¼‰

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **Ollama æŒ‡å—**: `OLLAMA_DEPLOYMENT_GUIDE.md`
- **éƒ¨ç½²æ¸…å•**: `DEPLOYMENT_CHECKLIST.md`
- **é…ç½®è¯´æ˜**: `CONFIGURATION_CHECKLIST.md`

---

## ğŸ‰ æ€»ç»“

### âœ… è‡ªåŠ¨åŒ–ä¼˜åŠ¿

1. **ä¸€é”®éƒ¨ç½²**ï¼šæ¨é€ä»£ç å³éƒ¨ç½²
2. **æ™ºèƒ½è¯†åˆ«**ï¼šè‡ªåŠ¨åŒºåˆ†é¦–æ¬¡/æ—¥å¸¸éƒ¨ç½²
3. **å¿«é€Ÿæ›´æ–°**ï¼šæ—¥å¸¸ä»…é‡å¯åç«¯ï¼Œ2-3 åˆ†é’Ÿå®Œæˆ
4. **æ•°æ®å®‰å…¨**ï¼šä¸­é—´ä»¶ä¸åœæ­¢ï¼Œæ•°æ®ä¸ä¸¢å¤±
5. **å¯è¿½æº¯**ï¼šå®Œæ•´éƒ¨ç½²æ—¥å¿—å¯æŸ¥

### ğŸš€ ä½¿ç”¨æµç¨‹

```bash
# æ¯æ¬¡æ›´æ–°ä»£ç 
git add .
git commit -m "feat: æ–°åŠŸèƒ½"
git push origin main

# ğŸ‰ å®Œæˆï¼è‡ªåŠ¨éƒ¨ç½²ï¼
```

---

Â© 2026 é“ƒé“›å¸ˆå…„å¤§æ¨¡å‹ - GitHub Actions æŒ‡å—
